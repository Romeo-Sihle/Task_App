<?php
	//connecting to the database
	include_once 'includes/connect.php';

	if(isset($_GET['edit-task']))//Note the GET parameter now has a Hyphen instead of an underscore
	{
		$e_id = $_GET['edit-task'];
	}

	if(isset($_POST['edit_task']))
	{
		$edit_task = $_POST['task'];

		$query = "UPDATE todo SET t_name = '$edit_task' WHERE t_id = $e_id";
		$run = mysqli_query($conn, $query);

		if(!$run)
		{
			die("Failed");
		}
		else
		{
			header("Location: index.php?update");
		}
	}





?>
<!DOCTYPE html>
<html>
<head>
	<title>To Do App</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
</head>

	<style>
		.todo
		{
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			border-radius: 5px;
			border: 2px solid #cccccc;
			margin-top: 5px;
		}

	</style>
<body>
<div class="container">
	<div class="todo">
		<h1><a href="index.php">To Do App</a></h1>
		<h3>Add a New Task</h3>
		<form action="" method="post">
			<?php

				$sql = "SELECT * FROM todo WHERE t_id = $e_id";
				$result = mysqli_query($conn, $sql);
				$data = mysqli_fetch_array($result);//fetches the data which will be edited
			?>
			<div class="form-group">
				<input class="form-control" type="text" name="task" placeholder="Task Name" value="<?php echo $data['t_name']; ?>">
			</div>
			<div class="form-group">
				<input class="btn-primary" type="submit" name="edit_task" value="Edit">
			</div>
		</form>
	</div>
</div>
</body>
</html>